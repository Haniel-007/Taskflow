epic: "Administração e Filtros Avançados"

stories:
  - id: "CA-1"
    title: "Painel de Gerenciamento de Usuários para Admin"
    objective: "Permitir que Administradores gerenciem usuários de forma centralizada para manter a integridade e a organização do sistema."
    context: "Como um Administrador (Admin), eu quero ter um painel para visualizar todos os usuários, desativar contas e promover usuários a MANAGER, para que eu possa administrar as permissões e o acesso ao sistema."
    architecture_patterns:
      - "Endpoint: GET /api/admin/users"
      - "Endpoint: PATCH /api/admin/users/{userId}/status"
      - "Endpoint: PATCH /api/admin/users/{userId}/role"
      - "Módulo: admin (novo)"
      - "Segurança: Endpoints protegidos para o role 'ADMIN'."
      - "DTO: UpdateUserStatusRequest (status), UpdateUserRoleRequest (role)."
      - "Banco de Dados: Atualiza o status ou o role do usuário na tabela 'usuarios'."
    acceptance_criteria:
      - "DADO que sou um ADMIN e estou autenticado,"
      - "QUANDO eu envio uma requisição GET para /api/admin/users,"
      - "ENTÃO o sistema deve retornar 200 OK com a lista de todos os usuários."
      - "DADO que sou um ADMIN,"
      - "QUANDO eu envio uma requisição PATCH para /api/admin/users/{userId}/role com o role 'MANAGER',"
      - "ENTÃO o usuário deve ser promovido e o sistema retornar 200 OK."
      - "DADO que um usuário não-ADMIN tenta acessar qualquer endpoint /api/admin/**,"
      - "ENTÃO o sistema deve retornar o status 403 Forbidden."

  - id: "GT-4"
    title: "Filtragem de Tarefas por Status e Responsável"
    objective: "Permitir que os usuários encontrem tarefas específicas rapidamente, melhorando a produtividade e a organização."
    context: "Como um Colaborador (Lucas), eu quero poder filtrar as tarefas de um projeto por status e por responsável, para que eu possa focar no que é mais relevante."
    architecture_patterns:
      - "Endpoint: GET /api/projects/{projectId}/tasks"
      - "Módulo: task"
      - "Segurança: Endpoint protegido para membros do projeto."
      - "Query Params: 'status' (ex: TODO, DONE), 'assigneeId' (UUID)."
      - "Banco de Dados: A query na tabela 'tasks' deve incluir cláusulas WHERE dinâmicas baseadas nos parâmetros."
    acceptance_criteria:
      - "DADO que sou membro de um projeto e estou autenticado,"
      - "QUANDO eu envio uma requisição GET para /api/projects/{projectId}/tasks?status=IN_PROGRESS,"
      - "ENTÃO o sistema deve retornar 200 OK com uma lista de tarefas que estão 'Em Progresso'."
      - "DADO que sou membro de um projeto,"
      - "QUANDO eu envio uma requisição GET para /api/projects/{projectId}/tasks?assigneeId={userId},"
      - "ENTÃO o sistema deve retornar 200 OK com as tarefas atribuídas ao usuário especificado."
      - "QUANDO eu não forneço parâmetros de filtro,"
      - "ENTÃO o sistema deve retornar todas as tarefas do projeto."

  - id: "GP-3"
    title: "Visualizar Meus Projetos"
    objective: "Permitir que os usuários vejam facilmente todos os projetos em que estão envolvidos para facilitar a navegação."
    context: "Como um Colaborador (Lucas), eu quero poder visualizar uma lista de todos os projetos aos quais pertenço, para que eu possa navegar facilmente entre eles."
    architecture_patterns:
      - "Endpoint: GET /api/projects"
      - "Módulo: project"
      - "Segurança: Endpoint protegido para usuários autenticados."
      - "Banco de Dados: A query deve buscar todos os projetos onde o usuário autenticado é um membro."
    acceptance_criteria:
      - "DADO que estou autenticado,"
      - "QUANDO eu envio uma requisição GET para /api/projects,"
      - "ENTÃO o sistema deve retornar 200 OK com a lista de projetos dos quais sou membro."
      - "DADO que não sou membro de nenhum projeto,"
      - "QUANDO eu envio a mesma requisição,"
      - "ENTÃO o sistema deve retornar 200 OK com uma lista vazia."
